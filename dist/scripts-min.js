let pokemonRepository=function(){let e=[],t=document.querySelector("form"),n=document.querySelector('input[type="search"');function l(){return e}function a(t){return"object"!=typeof t?console.warn("Only objects may be added to list"):Object.keys(t).includes("name")?void e.push(t):console.warn("Pokemon must have a name")}function o(e){let t=document.querySelector(".pokemon-list > div"),n=document.createElement("button");n.innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1),n.classList.add("btn"),n.classList.add("list-group-item"),n.classList.add("pokemon-button"),n.setAttribute("data-bs-toggle","modal"),n.setAttribute("data-bs-target","#pokemonModal"),n.setAttribute("role","listitem"),t.appendChild(n),n.addEventListener("click",()=>{var t;t=e,p(t)})}function r(e){p(e)}function s(e){let t=e.detailsUrl;return d(),fetch(t).then(function(e){return e.json()}).then(function(t){c(),e.imageUrl=t.sprites.other["official-artwork"].front_default,e.height=t.height,e.types=t.types,e.weight=t.weight,e.abilities=t.abilities,e.speciesUrl=t.species.url}).catch(function(e){c(),console.error(e)})}function d(){let e=document.querySelector(".pokemon-list"),t=document.createElement("p");t.classList.add("loading-message"),t.innerText="Retrieving Pokemon data...",e.appendChild(t)}function c(){document.querySelector(".loading-message").remove()}function p(t){let n=document.querySelector(".prevButton"),l=document.querySelector(".nextButton");if(e[e.indexOf(t)+1]){let a=document.createElement("button");a.textContent="❯",a.classList.add("pokemon-next"),a.addEventListener("click",()=>{m(t,1)}),l.appendChild(a)}if(e[e.indexOf(t)-1]){let o=document.createElement("button");o.textContent="❮",o.classList.add("pokemon-prev"),o.addEventListener("click",()=>{m(t,0)}),n.appendChild(o)}let r=document.querySelector(".modal-body");document.querySelector(".modal").addEventListener("hidden.bs.modal",u),s(t).then(function(){var n;document.querySelector(".pokemon-image").src=t.imageUrl;document.querySelector(".modal-title").innerText="#"+(e.indexOf(t)+1).toString()+" "+t.name.charAt(0).toUpperCase()+t.name.slice(1);let l=document.createElement("div");l.classList.add("row"),l.classList.add("justify-content-center"),l.classList.add("type-container"),r.appendChild(l),t.types.forEach(e=>{let t=document.createElement("div");t.classList.add("type-span"),t.classList.add(`${e.type.name}`),t.innerText=e.type.name.toUpperCase(),l.appendChild(t)});let a=document.createElement("div");a.classList.add("details-profile"),r.appendChild(a);let o=document.createElement("p");o.classList.add("mb-2"),o.classList.add("description"),a.appendChild(o);let s=document.createElement("div"),d=document.createElement("span"),c=document.createElement("span");d.classList.add("fw-bold"),d.innerText="Height: ",c.innerText=t.height,s.appendChild(d),s.appendChild(c),a.appendChild(s);let p=document.createElement("div"),u=document.createElement("span"),m=document.createElement("span");u.classList.add("fw-bold"),u.innerText="Weight: ",m.innerText=t.weight,p.appendChild(u),p.appendChild(m),a.appendChild(p);let f=document.createElement("div"),h=document.createElement("span");h.classList.add("fw-bold"),h.innerText="Abilities: ";let v=document.createElement("span"),y="";t.abilities.forEach(e=>{y+=e.ability.name.charAt(0).toUpperCase()+e.ability.name.slice(1),t.abilities.indexOf(e)!=t.abilities.length-1&&(y+=", "),v.innerText=y,f.appendChild(h),f.appendChild(v),a.appendChild(f)});fetch((n=t).speciesUrl).then(function(e){return e.json()}).then(function(e){n.evoUrl=e.evolution_chain.url,n.flavorText=function e(t){let n=null,l=0;for(;null===n;)"en"===t[l].language.name&&(n=t[l].flavor_text),l++;return n}(e.flavor_text_entries)}).catch(function(e){console.error(e)}).then(function(){var e;fetch((e=t).evoUrl).then(function(e){return e.json()}).then(function(t){e.evolutions=function e(t,n=[]){return n.push(t[0].species.name),t[0].evolves_to.length>0&&e(t[0].evolves_to,n),n}([t.chain])}).catch(function(e){console.error(e)}).then(function(){let e=t.flavorText.replaceAll("\n"," ").replaceAll("\f"," ");o.innerText=e;let n=document.createElement("div"),l=document.createElement("span");l.classList.add("fw-bold");let r=document.createElement("span"),s="";t.evolutions.forEach(e=>{s+=e.charAt(0).toUpperCase()+e.slice(1),t.evolutions.indexOf(e)!=t.evolutions.length-1&&(s+=" > ")}),l.innerText="Evolutions: ",r.innerText=s,n.appendChild(l),n.appendChild(r),a.appendChild(n)})})})}function u(){document.querySelector(".modal-body").querySelectorAll("div").forEach(e=>{e.remove()});let e=document.querySelector(".pokemon-next");e&&e.remove();let t=document.querySelector(".pokemon-prev");t&&t.remove()}function m(t,n){let l=e.indexOf(t),a=e[l+1],o=e[l-1];u(),1===n?p(a):0===n&&p(o)}function f(t){document.querySelectorAll(".pokemon-button").forEach(e=>{e.remove()}),t?e.forEach(function(e){e.name.startsWith(t)&&o(e)}):h()}function h(){let e=pokemonRepository.getAll();for(i=0;i<150;i++)pokemonRepository.addListItem(e[i])}return n.addEventListener("keyup",e=>{f(e.target.value)}),t.addEventListener("submit",()=>{f(n.value)}),{getAll:l,add:a,addListItem:o,find:function t(n){return e.filter(e=>e.name===n)},loadList:function e(){return d(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=1500").then(function(e){return e.json()}).then(function(e){c();let t=1;e.results.forEach(function(e){a({name:e.name,detailsUrl:e.url}),t++})}).catch(function(e){c(),console.error(e)})},loadDetails:s,switchModal:m,displayBaseList:h}}();pokemonRepository.loadList().then(function(){pokemonRepository.displayBaseList()});